---
layout: post
title:  Why Code Review? 
---

코드리뷰에 대한 전반적인 이해를 높여 봅시다. 

## 코드 리뷰 흐름 

  변경사항 작성 → 스냅샷 생성 → 셀프 리뷰 → 동료 리뷰 요청 → 리뷰 → 수정 → LGTM → 코드 베이스 커밋 

코드 리뷰 과정은 어떤 변경이든 아래 세가지 측면의 리뷰를  통과 해야 합니다. 각 단계별 역활의 분리를 통해 각기 다른 측면에 집중해서 리뷰 하도록 합니다. 일반적으로 업무의 간소화와 효율 향상을 위해 1,2 단계로 진행합니다. 

## 코드리뷰 3단계 
*  동료 리뷰
  * 정확성, 이해 용이성 
    * 동료 리뷰어는 코드가 정확한지, 변경된 코드가 유효한지 검증 
* 코드 소유자의 승인 
  * 코드 베이스에 커밋이 적합한지 집중 
  * 이 코드는 유지보수 하기 쉬운가?  유지보수 가능한 다른 인력이 있는가? 기술부채를 남기지 않는가?
* 가독성 승인 

## 코드리뷰의 이점
* 코드가 정확한지 확인 
* 변경된 코드를 다른 엔지니어도 잘 이해 
* 코드베이스가 일관되게 관리 
* 팀이 코드의 주인의식을 가짐 
* 지식 공유 
* 코드리뷰 자체가 기록을 남아 관리 됨 

### 코드 정확성 확인  
* 적합한 테스트가 있는가?
* 설계는 적절한가?
* 정확하게 동작하고 효율적인가?
* 코드가 시간이 흘러도 이해하기 쉽고 코드베이스가 커져도 의미가 통할 것인가? 
* 주의 사항 
  * 작성자가 선택한 방식을 존중, 설계든 기능이든 
  * 완벽한 개선이 아니어도 코드베이스를 개선한다고 인정되면 승인하는게 좋음 
    
### 코드 이해 용이성
* 코드는 작성되는 횟수보다 읽히는 횟수가 훨씬 많다. 읽기 쉬운 코드가 유지보수 용이 하다.  
* 작성자는 작성자와 관점이 다른 리뷰어 의견 수용 
* 비판이 있다고 해서 꼭 로직을 바꿔야 하는 것은 아니다. 더 명확한 설명이 필요할 것이다.

### 코드 일관성(가독성 승인)
* 해당언어의 모범사례 준수 
* 사내 레포지토리내 같은 언어로 작성된 다른 코드들과 일관성 유지
* 필요이상 복잡하지 않아야 함 (기능적으로 부족해도 이해하기 쉬운 코드 선호)

### 심리적 문화적 이점
* 코드는 자신의 소유물이 아니라 협업을 통해 만들어지는 '조직의 공동 소유물' 
* 코드리뷰는 원래 비판적으로 검토 하는 제도 (비판 != 비난) 
* 코드리뷰를 요청하면 값진 조언과 질문을 얻음 
* 셀프리뷰를 통해 개선, 절차를 무시한 코드 방지 

 ### 지식공유
* 리뷰는 제안 신기술 소개 조언등 작성자에게 도메인 지식을 전파

## 코드 리뷰 잘하는 방법
* LGTM 남발 하지 않기 
* 작성자 방식 존중 , 방식에 결함이 있을때 대안을 제시 (취향반영  X) 
* 리뷰어는 작성자의 방식을 성급히 결론짓지 말고 질문 
* 리뷰어는 신속한 피드백 (24시간 이내)
* 리뷰어는 이것저것 조금씩 피드백 하는건 지양 
* '나'와 '나의코드'를 동일시 하지 말기 
* 코드가 코드베이스에 반영되는 순간 더 이상 내것이 아님 
* 리뷰 중에 리뷰어의 의견은 TODO로 취급하고 최소한 고민을 해야 함 
* 작성자는 제안자의 견해를 수용적인 자세로 응함 


### 작게 변경하기
* 구글의 변경의 35%는 파일 하나에서 이루어짐
* 한번의 PR에는 리뷰어가 이해 가능한 수준의 코드 변경이 이루어져야 리뷰가 가능 하다.


### 변경설명 잘쓰기
* 당연하지만 잘 하기 어려운것
* 변경사항을 이해하기 쉽게 설명, 변경 사항에 대한 단위 테스트를 구체적으로 명시 한다. 

### 리뷰어는 최소한으로 
* 리뷰어를 추가해서 얻는 가치보다 비용이 더 큼  
* 테스트 자동화를 위해 꾸준히 노력한다. 

## 자동화 방법
* pre submit
* 테스트
* 린터
* 포멧터
